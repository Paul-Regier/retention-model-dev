<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Paul Regier">

<title>Instruments Used</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="02-instruments_files/libs/clipboard/clipboard.min.js"></script>
<script src="02-instruments_files/libs/quarto-html/quarto.js"></script>
<script src="02-instruments_files/libs/quarto-html/popper.min.js"></script>
<script src="02-instruments_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="02-instruments_files/libs/quarto-html/anchor.min.js"></script>
<link href="02-instruments_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="02-instruments_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="02-instruments_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="02-instruments_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="02-instruments_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#pre-semester-survey" id="toc-pre-semester-survey" class="nav-link active" data-scroll-target="#pre-semester-survey">Pre-semester Survey</a>
  <ul class="collapse">
  <li><a href="#growth-mindset-scale-gms" id="toc-growth-mindset-scale-gms" class="nav-link" data-scroll-target="#growth-mindset-scale-gms">Growth Mindset Scale (GMS)</a>
  <ul class="collapse">
  <li><a href="#items" id="toc-items" class="nav-link" data-scroll-target="#items">Items</a></li>
  <li><a href="#response-format" id="toc-response-format" class="nav-link" data-scroll-target="#response-format">Response Format</a></li>
  <li><a href="#source" id="toc-source" class="nav-link" data-scroll-target="#source">Source</a></li>
  </ul></li>
  <li><a href="#stress-mindset-measure-smm" id="toc-stress-mindset-measure-smm" class="nav-link" data-scroll-target="#stress-mindset-measure-smm">Stress Mindset Measure (SMM)</a>
  <ul class="collapse">
  <li><a href="#items-1" id="toc-items-1" class="nav-link" data-scroll-target="#items-1">Items</a></li>
  <li><a href="#response-format-1" id="toc-response-format-1" class="nav-link" data-scroll-target="#response-format-1">Response Format</a></li>
  <li><a href="#source-1" id="toc-source-1" class="nav-link" data-scroll-target="#source-1">Source</a></li>
  </ul></li>
  <li><a href="#compassion-mindset-scale-cms" id="toc-compassion-mindset-scale-cms" class="nav-link" data-scroll-target="#compassion-mindset-scale-cms">Compassion Mindset Scale (CMS)</a>
  <ul class="collapse">
  <li><a href="#items-2" id="toc-items-2" class="nav-link" data-scroll-target="#items-2">Items</a></li>
  <li><a href="#response-scale" id="toc-response-scale" class="nav-link" data-scroll-target="#response-scale">Response Scale</a></li>
  </ul></li>
  <li><a href="#compassion-mindset-assessment-cma" id="toc-compassion-mindset-assessment-cma" class="nav-link" data-scroll-target="#compassion-mindset-assessment-cma">Compassion Mindset Assessment (CMA)</a>
  <ul class="collapse">
  <li><a href="#items-3" id="toc-items-3" class="nav-link" data-scroll-target="#items-3">Items</a></li>
  <li><a href="#response-scale-1" id="toc-response-scale-1" class="nav-link" data-scroll-target="#response-scale-1">Response Scale</a></li>
  </ul></li>
  <li><a href="#neos-scale" id="toc-neos-scale" class="nav-link" data-scroll-target="#neos-scale">NEOS Scale</a>
  <ul class="collapse">
  <li><a href="#items-4" id="toc-items-4" class="nav-link" data-scroll-target="#items-4">Items</a></li>
  <li><a href="#response-scale-2" id="toc-response-scale-2" class="nav-link" data-scroll-target="#response-scale-2">Response Scale</a></li>
  <li><a href="#source-2" id="toc-source-2" class="nav-link" data-scroll-target="#source-2">Source</a></li>
  </ul></li>
  <li><a href="#remaining-pre-semester-questions" id="toc-remaining-pre-semester-questions" class="nav-link" data-scroll-target="#remaining-pre-semester-questions">Remaining Pre-semester Questions</a></li>
  </ul></li>
  <li><a href="#post-semester-survey" id="toc-post-semester-survey" class="nav-link" data-scroll-target="#post-semester-survey">Post-Semester Survey</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Instruments Used</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Paul Regier </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="pre-semester-survey" class="level1">
<h1>Pre-semester Survey</h1>
<p>The first three sets of questions involve measuring mindsets. Thus, this survey begins with the prompt:</p>
<blockquote class="blockquote">
<p>Mindset describes how we view ourselves and the world. Below are a series of questions about how you see yourself. There are no right or wrong answers. The best answer is the one that’s most true for you right now in your life.</p>
</blockquote>
<section id="growth-mindset-scale-gms" class="level2">
<h2 class="anchored" data-anchor-id="growth-mindset-scale-gms">Growth Mindset Scale (GMS)</h2>
<p>The <a href="https://sparqtools.org/mobility-measure/growth-mindset-scale/">Growth Mindset Scale (GMS)</a> measures how much people believe that they can get smarter if they work at it.</p>
<section id="items" class="level3">
<h3 class="anchored" data-anchor-id="items">Items</h3>
<p>Read each sentence below and then choose theone response that shows how much you agree with it.</p>
<ol type="1">
<li>You have a certain amount of intelligence, and you can’t really do much to change it.</li>
<li>Your intelligence is something about you that you can’t change very much.</li>
<li>You can learn new things, but you can’t really change your basic intelligence.</li>
</ol>
<p>GMS1, GMS2, and GMS3 correspond to questions 1-3 of the GMS. The mean of these three items represents a composite measure of growth mindset.</p>
</section>
<section id="response-format" class="level3">
<h3 class="anchored" data-anchor-id="response-format">Response Format</h3>
<blockquote class="blockquote">
<p>Note: all three GMS items are negatively worded.</p>
</blockquote>
<p>1 = strongly agree;<br>
2 = agree;<br>
3 = mostly agree;<br>
4 = mostly disagree;<br>
5 = disagree;<br>
6 = strongly disagree.</p>
</section>
<section id="source" class="level3">
<h3 class="anchored" data-anchor-id="source">Source</h3>
<p>Dweck, C. S. (1999). Self-theories: Their role in motivation, personality, and development. Philadelphia: Psychology Press.</p>
<p>Dweck, C. S., Chiu, C. Y., &amp; Hong, Y. Y. (1995). Implicit theories and their role in judgments and reactions: A world from two perspectives. Psychological Inquiry, 6(4), 267-285.</p>
</section>
</section>
<section id="stress-mindset-measure-smm" class="level2">
<h2 class="anchored" data-anchor-id="stress-mindset-measure-smm">Stress Mindset Measure (SMM)</h2>
<p>The <a href="https://usao0-my.sharepoint.com/:w:/g/personal/pregier_usao_edu/Eea14xz-uRxMgnswpHNr8CoBku5Vyp0hKmWdOPrPy0h9Rw?e=Cwg3yq">Stress Mindset Measure (SMMS)</a> measures “the extent to which an individual adopts a mindset that the effects of stress are enhancing or debilitating.”</p>
<p>Note a hight SMM score indicates believe that stress is enhancing to performance, verses a low SMM indicates a score that stress is debilitating.</p>
<section id="items-1" class="level3">
<h3 class="anchored" data-anchor-id="items-1">Items</h3>
<p>Rate the extent to which you agree or disagree with the following questions:</p>
<ol type="1">
<li>The effects of stress are negative and should be avoided.*</li>
<li>Experiencing stress facilitates my learning and growth.</li>
<li>Experiencing stress depletes my health and vitality.*</li>
<li>Experiencing stress enhances my performance and productivity.</li>
<li>Experiencing stress inhibits my learning and growth.*</li>
<li>Experiencing stress improves my health and vitality.</li>
<li>Experiencing stress debilitates my performance and productivity.*</li>
<li>The effects of stress are positive and should be utilized.</li>
</ol>
<blockquote class="blockquote">
<p>* = Reverse coded</p>
</blockquote>
<p>Note: In 2023 data, questions 7-8 were mistakenly omitted from the 2023 data.</p>
</section>
<section id="response-format-1" class="level3">
<h3 class="anchored" data-anchor-id="response-format-1">Response Format</h3>
<p>1 = strongly agree;<br>
2 = agree;<br>
3 = mostly agree;<br>
4 = mostly disagree;<br>
5 = disagree;<br>
6 = strongly disagree.</p>
</section>
<section id="source-1" class="level3">
<h3 class="anchored" data-anchor-id="source-1">Source</h3>
<p>Dweck, C. S. (1999). Self-theories: Their role in motivation, personality, and development. Philadelphia: Psychology Press.</p>
<p>Dweck, C. S., Chiu, C. Y., &amp; Hong, Y. Y. (1995). Implicit theories and their role in judgments and reactions: A world from two perspectives. Psychological Inquiry, 6(4), 267-285.</p>
<p>Please note that reverse scoring of the negatively worded items (1,3,5) has <strong>already been applied</strong> to the results provided. Thus, a mean of these 6 items, as provided, represents a composite measure of stress mindset.</p>
</section>
</section>
<section id="compassion-mindset-scale-cms" class="level2">
<h2 class="anchored" data-anchor-id="compassion-mindset-scale-cms">Compassion Mindset Scale (CMS)</h2>
<p>Compassion is the practice of demonstrating that people are valuable, capable, and responsible in every interaction (Next Element, 2023). Compassion mindset is the extent to which an individual chooses to view themselves and others as valuable, capable, and responsible in every interaction (Regier, 2023)</p>
<p>We anticipate compassion mindset will enhance how a learner engages in the learning process. Next Element has anecdotal evidence that a compassion mindset enhances learning outcomes.</p>
<section id="items-2" class="level3">
<h3 class="anchored" data-anchor-id="items-2">Items</h3>
<p>Rate the extent to which you agree or disagree with the following questions:</p>
<ol type="1">
<li>I am unconditionally valuable and deserve to be respected.</li>
<li>Even if I make a mistake or fail to perform, I am still worthwhile as a person.</li>
<li>I am capable of positive change and contribution.</li>
<li>Under the right conditions, anyone can learn and grow.</li>
<li>Pointing fingers gets me further away from a solution.</li>
<li>No matter what happened before, I am responsible for I do next.</li>
</ol>
</section>
<section id="response-scale" class="level3">
<h3 class="anchored" data-anchor-id="response-scale">Response Scale</h3>
<p>0 = Strongly Disagree<br>
1 = Disagree<br>
2 = Neither Agree nor Disagree<br>
3 = Agree<br>
4 = Strongly Agree</p>
</section>
</section>
<section id="compassion-mindset-assessment-cma" class="level2">
<h2 class="anchored" data-anchor-id="compassion-mindset-assessment-cma">Compassion Mindset Assessment (CMA)</h2>
<p>Same theoretical basis as CMS, but measuring extent to</p>
<section id="items-3" class="level3">
<h3 class="anchored" data-anchor-id="items-3">Items</h3>
<p>How consistently do you currently apply these principles to in your life?</p>
<ol type="1">
<li>I am unconditionally valuable and deserve to be respected.</li>
<li>Even if I make a mistake or fail to perform, I am still worthwhile as a person.</li>
<li>I am capable of positive change and contribution.</li>
<li>Under the right conditions, anyone can learn and grow.</li>
<li>Pointing fingers gets me further away from a solution.</li>
<li>No matter what happened before, I am responsible for I do next.</li>
</ol>
</section>
<section id="response-scale-1" class="level3">
<h3 class="anchored" data-anchor-id="response-scale-1">Response Scale</h3>
<p>1-Never<br>
2<br>
3<br>
4<br>
5-All the time</p>
</section>
</section>
<section id="neos-scale" class="level2">
<h2 class="anchored" data-anchor-id="neos-scale">NEOS Scale</h2>
<p>The Next Element Outcomes Scale (NEOS) measures one’s self-efficacy for effective functioning across three dimensions: maintaining open (emotions), resourceful (thinking), and persistent (action).</p>
<section id="items-4" class="level3">
<h3 class="anchored" data-anchor-id="items-4">Items</h3>
<ol type="1">
<li>Stay motivated when things seem impossible.</li>
<li>Trust in the goodness of others.</li>
<li>Bounce back quickly when I am stressed out.</li>
<li>Accept my failures as a necessary part of problem-solving.</li>
<li>Stay focused on my goals when things keep getting in my way.</li>
<li>Ask others for help when I need it.</li>
<li>Find more than one way to solve a problem.</li>
<li>Understand both my strengths and weaknesses.</li>
<li>Finish what I start even if I don’t want to.</li>
</ol>
<p>A mean of these nine items (as the data is provided) represents a composite measure of effective functioning across these three dimensions.</p>
</section>
<section id="response-scale-2" class="level3">
<h3 class="anchored" data-anchor-id="response-scale-2">Response Scale</h3>
<p>Questions are rated from 0 (No way I can) to 10 (Definitely sure I can).</p>
</section>
<section id="source-2" class="level3">
<h3 class="anchored" data-anchor-id="source-2">Source</h3>
<p>Next Element, Inc.</p>
</section>
</section>
<section id="remaining-pre-semester-questions" class="level2">
<h2 class="anchored" data-anchor-id="remaining-pre-semester-questions">Remaining Pre-semester Questions</h2>
<p>Four additional questions were also asked using the response scale below:</p>
<ul>
<li>1 - Strongly Disagree<br>
</li>
<li>2 - Disagree<br>
</li>
<li>3 - Neither agree nor disagree<br>
</li>
<li>4 - Agree<br>
</li>
<li>5 - Strongly Agree</li>
</ul>
<p><code>Schedule</code>: I have made my schedule for the Spring semester with the intent to be a student at USAO next semester.<br>
<code>Grad_4yrs</code>: I intend to graduate from USAO in the next four years.<br>
<code>Gender</code>: Women, Man, Transgender, Non-binary (Note, in the pre-semester survey, the options for this were inaccurately provided as Male, Female, Transgender.)<br>
<code>FYS_Section</code>: One of 16 sections of FYS taught in Fall 2024. Of those, 8 sections were taught by faculty, 3 by adjunct, and 5 by staff. Three sections were online, as listed below.</p>
<ul>
<li>Sections taught by Faculty
<ul>
<li>Section 1 - Instructor F1</li>
<li>Section 5 - Instructor F2<br>
</li>
<li>Section 7 - Instructor F1</li>
<li>Section 8 - Instructor F1</li>
<li>Section 9 - Instructor F3</li>
<li>Section 10 - Instructor F4</li>
<li>Section 11 - Instructor F2</li>
<li>Section 12 - Instructor F5</li>
</ul></li>
<li>Sections taught by Adjunct
<ul>
<li>Section 2 - Instructor A1</li>
<li>Section 4 - Instructor A2</li>
<li>Section 6 - Instructor A1</li>
</ul></li>
<li>Sections taught by Staff
<ul>
<li>Section 3 - Instructor S1</li>
<li>Section 13 - Instructor S2 (Online)</li>
<li>Section 14 - Instructor F3 (Online)</li>
<li>Section 15 - Instructor F3 (Staff)</li>
<li>Section 17 - Instructor F3 (Online)</li>
</ul></li>
</ul>
</section>
</section>
<section id="post-semester-survey" class="level1">
<h1>Post-Semester Survey</h1>
<p>In addition to all the above questions, the following questions were provided on the pre-semester survey, using the response scale below:</p>
<ul>
<li>1 - Strongly Disagree<br>
</li>
<li>2 - Disagree<br>
</li>
<li>3 - Neither agree nor disagree<br>
</li>
<li>4 - Agree<br>
</li>
<li>5 - Strongly Agree</li>
</ul>
<p><code>Value1</code> - The in-class sessions were a valuable use of my time. (If you are enrolled in an online session, choose NA)<br>
<code>Value2</code> - The online asynchronous activities were a valuable use of my time.<br>
<code>Value3</code> - I would prefer if this course involved more in-person sessions.<br>
<code>Value4</code> - I would prefer if this course involved more online activities.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>